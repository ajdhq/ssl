services:
  ssl:
    image: ssl
    platform: linux/amd64
    container_name: ssl-webapp
    restart: always
    environment:
      - PORT=8080
      - KEY=/etc/nginx/ssl/live/rahulgharat.online/fullchain.pem
      - CRT=/etc/nginx/ssl/live/rahulgharat.online/privkey.pem
    volumes:
      - ./certbot/www:/var/www/certbot/:ro
      - ./certbot/conf/:/etc/nginx/ssl/:ro
    ports:
      - 8080:8080

  webserver:
    image: nginx
    platform: linux
    container_name: dronahq-self-hosted-webserver
    restart: always
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
      - ./certbot/www:/var/www/certbot/:ro
      - ./certbot/conf/:/etc/nginx/ssl/:ro
    ports:
      - 80:80
      - 443:443